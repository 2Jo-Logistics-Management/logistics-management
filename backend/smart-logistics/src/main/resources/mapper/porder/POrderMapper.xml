<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.douzon.smartlogistics.domain.porder.dao.mapper.POrderMapper">
  <select id="searchPOrder" resultType="com.douzon.smartlogistics.domain.entity.POrder">
    SELECT
    porder_code,
    porder_date,
    create_date,
    create_ip,
    create_id,
    modify_date,
    modify_ip,
    modify_id,
    state,
    account_no
    FROM PORDER
    <where>
      <if test="pOrderCode != null and pOrderCode != ''">
        AND PORDER_CODE LIKE CONCAT('%', #{pOrderCode}, '%')
      </if>
      <if test="state != null">
        AND STATE = #{state}
      </if>
      <if test="createId != null and createId != ''">
        AND CREATE_ID LIKE CONCAT('%', #{createId}, '%')
      </if>
      <if test="createIp != null and createIp != ''">
        AND CREATE_IP LIKE CONCAT('%', #{createIp}, '%')
      </if>
      <if test="accountNo != null">
        AND ACCOUNT_NO = #{accountNo}
      </if>
      <if test="startDate != null and startDate != ''">
        <![CDATA[ AND DATE(CREATE_DATE) >= #{startDate} ]]>
      </if>
      <if test="endDate != null and endDate != ''">
        <![CDATA[ AND DATE(CREATE_DATE) <= #{endDate} ]]>
      </if>
      <if test="pOrderDate != null and pOrderDate != ''">
        <![CDATA[ AND DATE(porder_date) >= #{pOrderDate} ]]>
      </if>
</where>
  </select>
</mapper>